
<html>
  <head>
    <!-- These are all of the necessary javascript and css files required to run your tests -->
    <script src="lib/jquery-1.2.6.js"></script>
    <script src="lib/jquery.fn.js"></script>
    <script src="lib/jquery.print.js"></script>
    <script src="lib/screw.builder.js"></script>
    <script src="lib/screw.matchers.js"></script>
    <script src="lib/screw.events.js"></script>
    <script src="lib/screw.behaviors.js"></script>
    <script src="../../../static/js/homepage.js"></script>
    <link rel="stylesheet" href="lib/screw.css">

    <script type="text/javascript">
	Screw.Unit(function() {
		describe("when homepage is initialized", function() {
		  it("should hide filterable criteria", function() {
			hideFilterableCriteria();
			expect($("#filterable_criteria ul.overlays").is(":visible")).to(equal, false);
	      });
		  it("should expand sectors on click", function() {
			expandSectors();
			expect($("ul.sector_drawer").is(":visible")).to(equal, true);
			expect($("ul.sectors_and_implementors li.sectors_li").is('.expanded')).to(equal, true);
		  });
		  it("should expand implementors on click", function() {
			expandImplementors();
			expect($("ul.implementor_drawer").is(":visible")).to(equal, true);
			expect($("ul.sectors_and_implementors li.implementors_li").is('.expanded')).to(equal, true);
		  });
		  it("should expand overlays on click", function() {
			expandOverlays();
			expect($("ul.overlays").is(":visible")).to(equal, true);
			expect($("li.overlay_drawer div").is('.expanded')).to(equal, true);
			expect($('li.overlay_drawer span').is('.open')).to(equal, true);
		  });
		  it("should toggle spinner", function() {
			toggleSpinner();
			expect($('#ajax-spinner').is(":visible")).to(equal, false);
		  });	
		  it("should construct query string", function() {
			selected_filters = [{"name":"filter1"},{"name":"filter2"}];
			qstring = constructQueryString(selected_filters);
			expect(qstring).to(equal, "&filter1=true&filter2=true")
		  });	
	    });
	});
    </script>
  </head>
  <body>
	<div id="ajax-spinner"></div>
  	<div id="filterable_criteria">
	<ul class="sectors">
		<li class="projects_drawer">
			<div>
				<span></span>
			</div>
		</li>
	</ul>
	<ul class="sectors_and_implementors">
		<li class="sectors_li">
		<ul class="sector_drawer">
		</ul>
		<li class="implementors_li">
		<ul class="implementor_drawer">
		</ul>
	</ul>
	<ul class="overlays">
		<li class="overlay_drawer">
			<div>
				<span></span>
			</div>
		</li>
	</ul>
	</div>
  </body>
</html>

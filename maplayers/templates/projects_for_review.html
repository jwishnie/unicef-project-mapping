{% extends "base.html" %}
{% load i18n %}
{% load project_tags %}

{% block title_extra %} My Projects {% endblock %}
{% block extrahead %}
        <link rel="stylesheet" href="{{ css_url }}/main.css" type="text/css" />
		<script src="{{ jquery }}" type="text/javascript"></script>
		<script type="text/javascript">
		
			jQuery(document).ready(function(){
				$('.publish_link').click(function(){
					var url = "/projects/publish/" + this.id +"/";
					var tr_id = "#project_" + this.id;
					$.get(url, function(data){
						$(tr_id).hide();
					});	
				});
				
				$('.reject_link').click(function(){
					var url = "/projects/reject/" + this.id +"/";
					var tr_id = "#project_" + this.id;
					$.get(url, function(data){
						$(tr_id).hide();
					});	
				});
				
				$('.delete_link').click(function(){
					var url = "/projects/delete/" + this.id +"/";
					var tr_id = "#project_" + this.id;
					$.get(url, function(data){
						$(tr_id).hide();
					});	
				});

			});
		</script>
		
		
{% endblock %}

{% block page_content %}
	<h2>Projects for Review: </h2>
	<table id="projects_for_review">
	<tr>
		<th>Project title</th>
		<th>Created by</th>
		<th>Action</th>
	</tr>
	{% for project in projects %}
		<tr id="project_{{project.id}}">
			<td><a href="/projects/id/{{project.id}}/">{{project.name}}</a></td>
			<td>{{project.created_by}}</td>
			<td>
				<span><a href="/edit_project/{{project.id}}/">Edit</a> &nbsp| &nbsp</span>
				<span class="request_changes_link" id="{{project.id}}">Request Changes &nbsp| &nbsp</span>
				<span class="publish_link" id="{{project.id}}">Publish &nbsp| &nbsp</span>
				<span class="reject_link" id="{{project.id}}">Reject &nbsp| &nbsp</span>
				<span class="delete_link" id="{{project.id}}">Delete</span>
			</td>
		</tr>
	{% endfor %}
	</table>
{% endblock %}
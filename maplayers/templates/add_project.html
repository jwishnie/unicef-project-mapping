{% extends "base.html" %}
{% load i18n %}

{% block title_extra %} &mdash; Add Project{% endblock %}
{% block stylesheet %}{{ css_url }}/add_project.css{% endblock %}

{% block extrahead %}
        <link rel="stylesheet" href="{{ css_url }}/main.css" type="text/css" />
		<script type="text/javascript" src="{{ mootools }}"></script>
		<script src="{{ jquery }}" type="text/javascript"></script>
		<link rel="stylesheet" href="{{ jquery_plugins_url }}/jquery.autocomplete.css" type="text/css" />
		<script type="text/javascript" src="{{ jquery_plugins_url }}/jquery.autocomplete.min.js"></script>
        <script type="text/javascript" src="{{ fancyuploader }}/Swiff.Uploader.js"></script>
        <script type="text/javascript" src="{{ fancyuploader }}/Fx.ProgressBar.js"></script>
        <script type="text/javascript" src="{{ fancyuploader }}/FancyUpload3.Attach.js"></script>

		<script type="text/javascript">
			jQuery.noConflict();
			var project_id = {{project_id}};
			var fancy_uploader_swf = "{{ fancyuploader_swf }}";
			var link_id = 1;
			jQuery(document).ready(function(){
				var sector_names = "{{sectors}}".split(", ");
				jQuery("#id_project_sectors").autocomplete(sector_names, {
					multiple: true,
					autoFill: true
				});
				
				var implementor_names = "{{implementors}}".split(", ");
				jQuery("#id_project_implementors").autocomplete(implementor_names, {
					multiple: true, 
					autoFill: true
				});
				
				jQuery("#add_link").click(function(){
					link_id +=1;
					var title_label_tag = "<label>Title: </label>";
					var title_tag = "<input type=\"text\" name=\"link_title\"></input>";
					var url_label_tag = "<label>Url: </label>";
					var url_tag = "<input type=\"text\" name=\"link_url\"></input>";
					var div_tag = "<div id=\"link_" + link_id + "\">" + title_label_tag + title_tag + url_label_tag + url_tag + "</div>";
					jQuery("#project-links").append(div_tag);
				});
				
			});
		</script>

        <script type="text/javascript" src="{{ js_url }}/fileupload.js"></script>
{% endblock %}

{% block page_content %}

		<form action="/add_project/" method="post">
			<p>
				<input type="hidden" name="project_id" value="{{project_id}}"></input>
			</p>
			<p>
				{{ form.name.errors }}
				<label for="id_name">Name:</label> 
				<input id="id_name" type="text" name="name" maxlength="30"></input>
			</p>
			<p>
				{{ form.description.errors }}
				<label for="id_description">Description:</label> 
				<textarea id="id_description" name="description" cols="40" rows="6"></textarea>
			</p>
			<p>
				{{ form.latitude.errors }}
				<label for="id_latitude">Latitude:</label> 
				<input type="text" name="latitude" id="id_latitude"></input>
			</p>
			<p>
				{{ form.longitude.errors }}
				<label for="id_longitude">Longitude:</label> 
				<input type="text" name="longitude" id="id_longitude"></input>
			</p>
			<p>
				{{ form.location.errors}}
				<label for="id_location">Location:</label> 
				<input id="id_location" type="text" name="location" maxlength="50"></input>
			</p>
			<p>
				{{ form.website_url.errors}}
				<label for="id_website_url">Website url:</label> 
				<input type="text" name="website_url" id="id_website_url"></input>
			</p>
			<p>
				{{ form.project_image.errors}}
				<label for="id_project_image">Project image:</label> 
				<input type="text" name="project_image" id="id_project_image"></input>
			</p>
			<p>
				{{ form.project_sectors.errors}}
				<label for="id_project_sectors">Sectors: </label> 
				<input type="text" name="project_sectors" id="id_project_sectors" autocomplete="off"></input>
				<label>(Eg : {{sectors}})</label>
			</p>
			<p>
				{{ form.project_implementors.errors}}
				<label for="id_project_implementors">Implementors: </label> 
				<input type="text" name="project_implementors" id="id_project_implementors" autocomplete="off"></input>
				<label>(Eg : {{implementors}})</label>
			</p>
			
			<p>
				{{ form.youtube_username.errors }}
				<label for="id_youtube_username">Youtube username: </label> 
				<input type="text" name="youtube_username" id="id_youtube_username"></input>
			</p>	
			
			<p>
				{{ form.imageset_feedurl.errors }}
				<label for="id_imageset_feedurl">Image set feed url: </label> 
				<input type="text" name="imageset_feedurl" id="id_imageset_feedurl"></input>
			</p>
			<p>
				<div id="file">
					<a href="#" id="file-attach" name="file-attach">Attach a file</a>
					<ul id="file-list"></ul><a href="#" id="file-attach-2" style="display: none;" name="file-attach-2">Attach another file</a>
				</div>
			</p>
			<p>
				<div id="project-links">
					<div id="link_1">
						<label>Title: </label><input type="text" name="link_title"></input>
						<label>Url: </label><input type="text" name="link_url"></input>
					</div>
				</div>
				<a href="#" id="add_link">Add another link</a>
			</p>
			<br/><br/>
			<input type="submit" value="Submit" />
		</form>
{% endblock %}